---
layout: post
title: Math and Academic Functions
author: typora.io
category: basic
tags: [math, latex]
typora-root-url: ../../
typora-copy-images-to: ../../media/math
---

Typora supports rendering normal mathematics using Tex/LaTeX syntax. The rendering process is processed by [MathJax](https://www.mathjax.org/).

**Table of Contents**

* Outline
{:toc}
## Math Block (Display Math)

Math blocks are LaTeX expressions wrapped by `$$` mark and line break, for example:

```Markdown
$$
\begin{align*}
y = y(x,t) &= A e^{i\theta} \\
&= A (\cos \theta + i \sin \theta) \\
&= A (\cos(kx - \omega t) + i \sin(kx - \omega t)) \\
&= A\cos(kx - \omega t) + i A\sin(kx - \omega t)  \\
&= A\cos \Big(\frac{2\pi}{\lambda}x - \frac{2\pi v}{\lambda} t \Big) + i A\sin \Big(\frac{2\pi}{\lambda}x - \frac{2\pi v}{\lambda} t \Big)  \\
&= A\cos \frac{2\pi}{\lambda} (x - v t) + i A\sin \frac{2\pi}{\lambda} (x - v t)
\end{align*}
$$
```

will be rendered as

$$
\begin{align*}
y = y(x,t) &= A e^{i\theta} \\
&= A (\cos \theta + i \sin \theta) \\
&= A (\cos(kx - \omega t) + i \sin(kx - \omega t)) \\
&= A\cos(kx - \omega t) + i A\sin(kx - \omega t)  \\
&= A\cos \Big(\frac{2\pi}{\lambda}x - \frac{2\pi v}{\lambda} t \Big) + i A\sin \Big(\frac{2\pi}{\lambda}x - \frac{2\pi v}{\lambda} t \Big)  \\
&= A\cos \frac{2\pi}{\lambda} (x - v t) + i A\sin \frac{2\pi}{\lambda} (x - v t)
\end{align*}
$$

In Typora, you can just type `$$` and press the <kbd>Return</kbd> key to input a math block. In input mode, use the Up/Down arrow keys or <kbd>Command/Ctrl</kbd> + <kbd>Return</kbd> key to finish editing, or just click the &#10003; button, or somewhere else.

## Inline Math

First of all, please enable the**Inline Math** feature from the preferences panel -> *Markdown* section. The preferences panel can be opened from menu bar → `File` → `Preferences...`, or use shortcut key <kbd>Command/Ctrl</kbd> + <kbd>,</kbd>. This setting will be applied after Typora restarts.

![CleanShot 2022-09-06 at 21.44.44@2x](/media/math/CleanShot%202022-09-06%20at%2021.44.44@2x.png)

Inline math uses syntax like this `$<Math Expressions>$`, e.g: `$f = \frac{2 \pi}{T}$`.

<video src="/media/math/inline math.mp4" style="zoom:50%;" autoplay loop mute></video>

## TeX Commands available in Typora

You can find all the supported TeX commands at <http://docs.mathjax.org/en/latest/input/tex/macros/index.html>. 

You can add new commands using the `\def` or`\newcommand`. For example:

```markdown
$$
\def\bold#1{{\bf #1}}

\bold{this\ is\ now\ bold}
$$
```

## Physics Package

To use the Physics package, please enable it in `Preference Panel` → `Markdown` → `Math` → `Enable physics package` .

## Chemistry Expressions

Typora has the built-in [mhchem](https://mhchem.github.io/MathJax-mhchem/) extension, which can be used to render Chemistry Expressions, you could use it like this: 

```Markdown
$\ce{CH4 + 2 $\left( \ce{O2 + 79/21 N2} \right)$}$
```

Which will be rendered as: <img src="/media/math/Snip20180815_1.png" style="zoom:50%;" />

For more details, please refer to <https://mhchem.github.io/MathJax-mhchem/>.

## Cross Reference

Typora supports the TeX-style reference syntax, for example:

```markdown
Here is a labeled equation:

$$
x+1\over\sqrt{1-x^2}\label{ref1}\tag{1}
$$

This is a reference : $\ref{ref1}$
```

## Auto Numbering

Typora supports auto-numbering math blocks.

<img src="/media/math/Screen%20Shot%202022-09-06%20at%2021.46.32.png" alt="Screen Shot 2022-09-06 at 21.46.32" style="zoom:50%;" />

To turn on this feature, please open the preferences panel and enable "Auto Numbering Math Equations" under the "Markdown" section.

<img src="/media/math/Snip20180818_4.png" style="zoom:50%" />

You can choose:

- No Automatic Equation Number (but you can manually number equations with `\tag` and `\label`).
- Use AMS Numbering Rule (where only certain environments produce numbered equations, as they would be in LaTeX).
- Auto Numbering for All Math Equations (every displayed equation will get a number, regardless of the environment used).

## Troubleshooting

### Force Refresh

When math rendering goes wrong, like the output math is too wild/narrow, or equation numbering becomes incorrect, you can trigger a forced refresh for all math from the `Edit` → `Math Tools` menu.

### Line Breaking

Starting from v0.11.0, Typora upgraded to MathJax v3, which does not support line break using `\\` or `\newline` in MathJax v2, the behavior is the same with LaTeX, unless you put them in a `\displaylines{}` environment, for example:

```
\displaylines{x+y\\y+z}
```

So you could use `\displaylines` as a workaround.

From v0.11.1, Typora provides a new option “Apply Line Break at \\\\” under `Preferences Panel` → `Markdown` → `Math`. By enabling it, Typora will auto wrap your math content with `\displaylines` if your content contains `\\` or `\newline` to achieve the same behavior as previous versions. But it may bring some unexpected issues, so if you are met with any math issues after enabling it, please try disabling the option and report to us if it is the cause.

Use `\displaylines` instead of enabling “Apply Line Break at \\\\” is recommended for adding line breaks in math.

## Limitations

- MathJax supports a limited subset of all LaTeX commands (references: <http://docs.mathjax.org/en/latest/input/tex/macros/index.html>).
- Not all export formats support math, and some commands/features of math/LaTeX would become unavailable after export.
